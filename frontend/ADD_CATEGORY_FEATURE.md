# 新增分组功能说明

## 功能概述

在设置界面的分组管理中新增了"新增分组"功能，用户可以通过简单的表单创建新的导航分组。

## 主要功能

### 1. 新增分组按钮

- **位置**：分组管理卡片的右上角
- **显示条件**：当不在新增分组表单状态时显示
- **样式**：绿色渐变按钮，带有加号图标

### 2. 新增分组表单

- **表单字段**：
  - 分组名称（必填）
- **操作按钮**：
  - 取消：关闭表单，清空输入
  - 创建：提交表单创建新分组
- **交互特性**：
  - 支持回车键快速提交
  - 实时验证输入内容
  - 加载状态提示

### 3. 自动排序

- **后端逻辑**：新创建的分组自动排在最后
- **排序计算**：获取当前最大排序号+1
- **数据同步**：创建成功后自动刷新分组列表

## 技术实现

### 1. 前端实现

#### 新增响应式数据
```typescript
// 新增分组相关
const showAddCategoryForm = ref(false)
const addCategoryForm = ref({
  name: ''
})
const addCategoryLoading = ref(false)
```

#### 新增方法
```typescript
// 创建新分组
const createCategory = async () => {
  // 验证输入
  // 调用API
  // 处理响应
  // 刷新列表
}

// 取消新增分组
const cancelAddCategory = () => {
  // 重置表单
  // 关闭表单
}
```

#### UI组件
- 新增分组按钮
- 新增分组表单（包含标题、描述、输入框、操作按钮）
- 响应式样式设计

### 2. 后端实现

#### 服务层优化
```java
@Override
public boolean createCategory(PanelCategory category) {
    // 如果没有设置排序号，自动设置为最大排序号+1
    if (category.getOrder() == null) {
        Integer maxOrder = getMaxOrder();
        category.setOrder(maxOrder + 1);
    }
    return save(category);
}

private Integer getMaxOrder() {
    // 查询最大排序号
    // 返回结果
}
```

## 用户体验优化

### 1. 视觉设计
- **一致性**：与现有UI风格保持一致
- **层次感**：清晰的视觉层次和信息组织
- **响应式**：适配不同屏幕尺寸

### 2. 交互体验
- **即时反馈**：操作状态的实时提示
- **错误处理**：友好的错误信息显示
- **快捷操作**：支持键盘快捷键

### 3. 数据处理
- **自动排序**：新分组自动排在列表末尾
- **实时更新**：创建成功后立即更新显示
- **状态管理**：完善的加载和错误状态

## 使用流程

1. **进入设置页面**：导航到系统设置
2. **点击新增分组**：点击分组管理区域的"新增分组"按钮
3. **填写分组信息**：输入分组名称
4. **提交创建**：点击"创建"按钮或按回车键
5. **查看结果**：新分组出现在列表末尾

## 注意事项

- 分组名称不能为空
- 新分组会自动排在最后
- 创建成功后会自动刷新分组列表
- 支持拖拽调整新分组的位置
