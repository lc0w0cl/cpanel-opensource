# 前端歌单解析功能使用指南

## 功能概述

前端已成功集成歌单解析功能，支持QQ音乐和网易云音乐歌单的解析和批量下载。

## 使用方法

### 1. 访问音乐页面

导航到 `/home/music` 页面

### 2. 选择歌单解析模式

在搜索区域，点击 **"歌单解析"** 选项卡

### 3. 输入歌单链接

在输入框中粘贴支持的歌单链接：

**QQ音乐歌单链接示例：**
- `https://y.qq.com/n/ryqq/playlist/8668419170`
- `https://y.qq.com/n/yqq/playlist/7266910918.html`

**网易云音乐歌单链接示例：**
- `https://music.163.com/#/playlist?id=123456`
- `https://music.163.com/playlist/123456/`

### 4. 解析歌单

点击 **"解析歌单"** 按钮，系统将自动：
- 识别歌单平台
- 获取歌单信息
- 提取所有歌曲列表

### 5. 查看歌单信息

解析成功后，页面将显示：
- 歌单封面和标题
- 创建者信息
- 歌曲数量
- 歌单描述

### 6. 批量操作

**全部添加到下载队列：**
- 点击歌单信息卡片中的 **"全部添加到下载队列"** 按钮

**选择性添加：**
- 在歌曲列表中勾选想要的歌曲
- 点击 **"添加到下载队列"** 按钮

### 7. 下载歌曲

- 在下载队列中点击 **"开始全部下载"**
- 或单独下载每首歌曲

## 界面特性

### 🎨 视觉设计
- 毛玻璃效果的歌单信息卡片
- 平台标识徽章（QQ音乐/网易云音乐）
- 响应式设计，支持移动端

### 🔄 交互体验
- 实时输入验证
- 加载状态指示
- 成功/错误通知
- 进度条显示

### 📱 响应式支持
- 桌面端：横向布局
- 移动端：纵向堆叠布局
- 自适应歌单封面大小

## 错误处理

### 常见错误提示
1. **"请输入有效的QQ音乐或网易云音乐歌单链接"**
   - 检查链接格式是否正确

2. **"歌单解析失败，请检查链接是否正确"**
   - 确认歌单是否存在且公开
   - 检查网络连接

3. **"不支持的歌单链接"**
   - 目前只支持QQ音乐和网易云音乐

## 技术实现

### 前端组件
- 新增歌单解析选项卡
- 歌单信息展示卡片
- 批量操作按钮
- 响应式样式

### API集成
- `parsePlaylist()` - 解析歌单
- `getSupportedPlatforms()` - 获取支持平台
- 自动平台识别

### 状态管理
- `playlistInfo` - 歌单信息
- `isParsingPlaylist` - 解析状态
- `playlistError` - 错误信息

## 开发者说明

### 添加新平台支持

1. **后端扩展：**
   ```java
   // 创建新的解析器
   @Service
   public class NewPlatformPlaylistParser {
       public PlaylistInfoDTO parsePlaylist(String url) {
           // 实现解析逻辑
       }
   }
   ```

2. **前端更新：**
   ```typescript
   // 更新URL验证逻辑
   const isValidUrl = computed(() => {
     // 添加新平台的URL验证
   })
   ```

### 自定义样式

歌单相关的CSS类：
- `.playlist-info-section` - 歌单信息区域
- `.playlist-card` - 歌单卡片
- `.playlist-meta` - 歌单元数据
- `.add-playlist-btn` - 批量添加按钮

## 注意事项

1. **网络依赖：** 歌单解析需要访问外部API
2. **版权限制：** 某些歌单可能因版权问题无法解析
3. **性能考虑：** 大型歌单解析可能需要较长时间
4. **缓存机制：** 建议添加歌单信息缓存以提升体验

## 未来改进

- [ ] 添加歌单收藏功能
- [ ] 支持更多音乐平台
- [ ] 歌单信息本地缓存
- [ ] 批量下载进度优化
- [ ] 歌单分享功能
